// const functions = require("firebase-functions");

// // http request 1
// exports.randomNumber = functions.https.onRequest((request, response) => {
//   const number = Math.round(Math.random() * 100);
//   console.log(number);
//   response.send(number.toString());
// });

// // http request 2
// exports.toTheDojo = functions.https.onRequest((request, response) => {
//   response.redirect("https://thenetninja.co.uk");
// });

// // http callable function
// exports.sayHello = functions.https.onCall((data, context) => {
//   return "hello world";
// });


// At every minute.
exports.myScheduledCloudFunction = functions.pubsub.schedule("* * * * *").
    timeZone("America/New_York").
    onRun(async (context) => {
    // Get reference to document.
      const cfDataDoc = await admin.firestore().
          collection("cf-data").doc("YAi6rlV6FkYG1fFRqCE7").get();

      // Conver doc to json.
      // const data = cfDataDoc.data();

      // Add 5 coins to the user.
      cfDataDoc.ref.update({"coins": admin.firestore.
          FieldValue.increment(5)});

      // TODO: Update to a random name.

      return null;
    });